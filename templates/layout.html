<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Shichan Study Space{% endblock %}</title>

  <!-- ✅ Relaxed CSP to allow Unsplash + CDN -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self' https://cdn.jsdelivr.net 'unsafe-inline';
                 style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline';
                 img-src 'self' data: https://images.unsplash.com;
                 font-src 'self' https://cdn.jsdelivr.net">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      transition: background 1s ease-in-out;
      min-height: 100vh;
      background-size: cover;
      background-position: center;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .quiz-card {
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      padding: 2rem;
      max-width: 600px;
      width: 100%;
    }

    h1, h2, h3 {
      font-weight: bold;
    }
  </style>

  {% block head %}{% endblock %}
</head>
<body>

  <div class="quiz-card text-center">
    {% block content %}
      <h1 class="mb-4">Welcome to Shichan Study Space</h1>
      <p class="lead">Your daily dose of quizzes and learning ✨</p>
      <a href="/quiz" class="btn btn-lg btn-primary mt-3">Start Quiz</a>
    {% endblock %}
  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Dynamic Background Script -->
  <script>
    const backgrounds = [
      "https://images.unsplash.com/photo-1581092580498-4d8d994810ee?auto=format&fit=crop&w=1950&q=80",
      "https://images.unsplash.com/photo-1601582588940-bfe0b91c326e?auto=format&fit=crop&w=1950&q=80",
      "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1950&q=80"
    ];

    function setRandomBackground() {
      const idx = Math.floor(Math.random() * backgrounds.length);
      document.body.style.backgroundImage = `url('${backgrounds[idx]}')`;
    }

    document.addEventListener("DOMContentLoaded", setRandomBackground);
  </script>

</body>
</html>
