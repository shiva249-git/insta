{% extends "layout.html" %}
{% block title %}Quiz - Shichan Study Space{% endblock %}

{% block content %}
<div class="quiz-card">
  {% if not questions %}
    <h3 class="mb-3 text-center">Choose Quiz Settings</h3>
    <div class="mb-3">
      <label class="form-label">Topic</label>
      <select class="form-select" id="topic">
        <option disabled selected>-- Choose Topic --</option>
        {% for t in ["GK","History","Science","Math","Polity"] %}
          <option>{{ t }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Difficulty</label>
      <select class="form-select" id="level">
        <option disabled selected>-- Choose Level --</option>
        {% for l in ["Easy","Medium","Hard"] %}
          <option>{{ l }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Number of Questions</label>
      <input type="number" id="num_questions" class="form-control" value="5" min="1" max="20">
    </div>
    <button id="start-quiz-btn" class="btn btn-primary w-100">Start Quiz</button>
  {% else %}
    <h3 class="mb-3 text-center">Quiz: {{ topic }} ({{ level }})</h3>
    <form method="POST" action="{{ url_for('submit_quiz') }}">
      {{ csrf_token() if csrf_token is defined }}
      {% for q in questions %}
        <div class="mb-3">
          <p><strong>Q{{ loop.index }}:</strong> {{ q.question }}</p>
          {% for key, val in q.options.items() %}
            <div class="form-check">
              <input class="form-check-input" type="radio" name="q{{ loop.index0 }}" value="{{ key }}" required>
              <label class="form-check-label">{{ key }}) {{ val }}</label>
            </div>
          {% endfor %}
        </div>
      {% endfor %}
      <button type="submit" class="btn btn-success w-100">Submit</button>
    </form>
  {% endif %}
</div>
{% endblock %}
